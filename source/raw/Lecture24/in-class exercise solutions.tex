\documentclass[12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{amsmath, amssymb}
\usepackage{enumitem}

\begin{document}

\begin{center}
{\Large \textbf{In-Class Exercise --- Solutions}}\\[6pt]
{\large \textbf{Lecture 24: Anomaly Detection}}
\end{center}

\vspace{8pt}

\noindent
Given:
\[
\#\text{Anomalies}=20,\qquad \#\text{Normal}=80
\]
\[
\text{TPR}=\frac{\text{TP}}{\text{TP}+\text{FN}}=\frac{\text{TP}}{\#\text{Anomalies}},
\qquad
\text{FPR}=\frac{\text{FP}}{\text{FP}+\text{TN}}=\frac{\text{FP}}{\#\text{Normal}}
\]

\vspace{10pt}
\noindent
\textbf{Solutions:}
\begin{enumerate}[label=(\arabic*), itemsep=10pt]

\item \textbf{At $\gamma_1$:} $\text{TP}=16$, $\text{FP}=12$
\[
\text{TPR}_1=\frac{16}{20}=0.80
\qquad
\text{FPR}_1=\frac{12}{80}=0.15
\]
\[
\boxed{\text{TPR}_1=0.80,\;\text{FPR}_1=0.15}
\]

\item \textbf{At $\gamma_2$:} $\text{TP}=12$, $\text{FP}=4$
\[
\text{TPR}_2=\frac{12}{20}=0.60
\qquad
\text{FPR}_2=\frac{4}{80}=0.05
\]
\[
\boxed{\text{TPR}_2=0.60,\;\text{FPR}_2=0.05}
\]

\item \textbf{More conservative threshold (fewer false positives):}
\[
\text{FP}_2=4 < \text{FP}_1=12
\Rightarrow \boxed{\gamma_2}
\]

\item \textbf{True/False:} Increasing $\gamma$ typically decreases both TPR and FPR.
\[
\boxed{\text{True}}
\]
(As threshold increases, detector flags fewer points as anomalies.)

\item \textbf{ROC point closer to ideal (0,1):}
Ideal is low FPR and high TPR. Point A has both higher TPR and moderate FPR; point B has low FPR but much lower TPR.
Using Euclidean distance to (0,1):
\[
d_A=\sqrt{(0.15)^2+(1-0.80)^2}=\sqrt{0.0225+0.04}\approx 0.25
\]
\[
d_B=\sqrt{(0.05)^2+(1-0.60)^2}=\sqrt{0.0025+0.16}\approx 0.40
\]
\[
\boxed{\text{A is closer}}
\]

\end{enumerate}

\vspace{6pt}
\noindent
\textbf{Final answers:}
\[
\boxed{
\text{TPR}_1=0.80,\;\text{FPR}_1=0.15,\;
\text{TPR}_2=0.60,\;\text{FPR}_2=0.05,\;
\gamma_2,\;
\text{True},\;
A
}
\]

\end{document}
